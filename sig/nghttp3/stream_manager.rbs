module Nghttp3
  class StreamManager
    BIDI_CLIENT: Integer
    BIDI_SERVER: Integer
    UNI_CLIENT: Integer
    UNI_SERVER: Integer

    def initialize: (is_server: bool) -> void

    def allocate_bidi_stream_id: () -> Integer
    def allocate_uni_stream_id: () -> Integer

    def register_stream: (Integer stream_id, ?type: :bidi | :uni) -> void
    def close_stream: (Integer stream_id) -> void
    def remove_stream: (Integer stream_id) -> void

    def stream_active?: (Integer stream_id) -> bool
    def active_stream_ids: () -> Array[Integer]
    def stream_info: (Integer stream_id) -> Hash[Symbol, Symbol]?

    def client_initiated?: (Integer stream_id) -> bool
    def server_initiated?: (Integer stream_id) -> bool
    def bidirectional?: (Integer stream_id) -> bool
    def unidirectional?: (Integer stream_id) -> bool
  end
end
